<!DOCTYPE html>
<html lang="zh-tw">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>ThinkPad X1 Carbon openSUSE Leap 安裝 | Random blog</title>
<link rel="stylesheet" href="https://ramaxlo.github.io/blog/css/style.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/github.min.css">


<section class="section">
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <a class="nav-item" href="https://ramaxlo.github.io/blog"><h1 class="title is-4">Random blog</h1></a>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile">
          
          <a class="level-item" href="https://github.com/ramaxlo">
            <span class="icon">
              <i class="fa fa-github"></i>
            </span>
          </a>
          
          <a class="level-item" href="/blog/index.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>
          </a>
          
        </nav>
      </div>
    </nav>
  </div>
</section>

<section class="section">
  <div class="container">
    <h2 class="subtitle is-6">October 5, 2017</h2>
    <h1 class="title">ThinkPad X1 Carbon openSUSE Leap 安裝</h1>
    <div class="content">
      

<p><a href="../x1c-gen5">入手 x1c</a> 之後，接下來的重要步驟就是要安裝系統。不例外，我們就是要在上面安裝 openSUSE Leap。以下小節會詳述安裝時遇到的一些問題與解決方法。</p>

<h1 id="調整磁碟分割表為-msdos-類型">調整磁碟分割表為 msdos 類型</h1>

<p>由於 x1c 預裝系統是 Windows 10，我沒打算設定雙系統開機，所以我在安裝前先進入 BIOS，把 secure boot 以及 UEFI 關閉，改用
legacy boot。安裝完後發現 BIOS 無法正確地從 MBR 開機。搞了半天才發現，legacy boot 只支援 msdos 類型的分割表，它看不懂
<a href="https://zh.wikipedia.org/zh-tw/GUID%E7%A3%81%E7%A2%9F%E5%88%86%E5%89%B2%E8%A1%A8">GPT</a> 類型的分割表。是故又重新分割了一次磁碟才能正常開機。</p>

<h1 id="電源管理不正常">電源管理不正常</h1>

<p>x1c 配備的是 i7-7500U，為第七代的 Core i CPU，openSUSE Leap 42.3 的預設 4.4 版核心似乎不能很好地支援這個較新的 CPU，以致於雖然可以正常休眠，但是從休眠狀態回復後再關機，就會發生關機不完全的現象；雖然電源燈是關閉的，但仍能感覺機身並沒有降溫的傾向；再次按電源鍵要開機，卻發現再也開不起來，結果被迫要用迴紋針去戳機背的 reset 鍵才會回復正常。搜尋了網上論壇發現有網友建議在 x1c 上安裝 Linux，最好核心要升級到 4.12 以上，驅動程式的支援才會比較完整。所以就立馬升級核心到最新的 4.13，果然問題就解決了。</p>

<p>原本正常來說，升級核心需要自行下載核心原始碼來編譯；不過 openSUSE 在 <a href="https://build.opensuse.org/project/show/Kernel:stable">OBS</a> 上已經有 Factory 套件庫可供安裝最新版本的核心，所以只需加入新套件庫後就可以安裝。</p>

<p>升級步驟如下：</p>

<pre><code class="language-bash">sudo zypper ar https://download.opensuse.org/repositories/Kernel:/stable/standard/ kernel-stable
sudo zypper ref kernel-stable
sudo zypper in kernel-default
</code></pre>

<h1 id="trackpad-中鍵無作用">Trackpad 中鍵無作用</h1>

<p>也許是因為 x1c 的觸控板是比較新的硬體，openSUSE Leap 42.3 預設核心是 4.4 版，相對來說比較舊了，以至於安裝完後發現 trackpad
的中鍵沒有作用，不過升級完核心後也可以正常運作了。</p>

<h1 id="virtualbox-需重新編譯">Virtualbox 需重新編譯</h1>

<p>由於 Virtualbox 需要安裝驅動程式，然而 42.3 提供的驅動程式只能在 4.4 版核心上運作，因此需要自行安裝原始碼套件
(source rpm) 來編譯出可供 4.13 版核心使用的 RPM 套件。</p>

<p>安裝步驟如下：</p>

<pre><code class="language-bash">sudo zypper in -t srcpackage virtualbox
cd /usr/src/packages/SPECS
# Install dependent packages
# ....
sudo rpmbuild -bb virtualbox.spec
cd /usr/src/packages/RPMS/x86_64
sudo zypper in virtualbox*.rpm
</code></pre>

    </div>
  </div>
</section>


<section class="section">
  <div class="container has-text-centered">
    <p>&copy; Ramax Lo 2019</p>
  </div>
</section>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/languages/go.min.js"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/languages/bash.min.js"></script>

<script>hljs.initHighlightingOnLoad();</script>


